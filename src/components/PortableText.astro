---
import { PortableText as SanityPortableText } from "astro-portabletext";
import PortableTextImage from "./PortableTextCmps/PortableTextImage.astro";
import PortableTextMark from "./PortableTextCmps/PortableTextMark.astro";
import PortableTextBlock from "./PortableTextCmps/PortableTextBlock.astro";
import Text from "./Text.astro";

const components = {
	type: {
		image: PortableTextImage,
		// object TODO
	},
	mark: {
		// strong (default)
		// em (default)
		// underline (default)
		// strike-through (default)
		sup: PortableTextMark,
		link: PortableTextMark,
	},
	block: {
		normal: PortableTextBlock,
		// h3 (default)
		// blockquote (default)
		note: PortableTextBlock,
	},
	list: {
		// bullet (default)
		// number (default)
	},
};

const {
	// PortableText props
	source,
	// Text props
	small,
	muted,
} = Astro.props;
---

{source && source.length !== 0
	? (
		<Text rich={true} small={small} muted={muted}>
			<SanityPortableText value={source} components={components} />
		</Text>
	)
	: null
}