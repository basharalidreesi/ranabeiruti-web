---
import type { Props as $, Block as BlockType } from "astro-portabletext/types";
import PortableTextNormal from "./PortableTextNormal.astro";
import PortableTextNote from "./PortableTextNote.astro";
import PortableTextH2 from "./PortableTextH2.astro";
import { Block } from "astro-portabletext/components";

export type Props = $<BlockType>;

const props = Astro.props;
const styleIs = (style: string) => style === props.node.style;

const Cmp =
	styleIs("normal") ? (PortableTextNormal)
	: styleIs("h2") ? (PortableTextH2)
	: styleIs("note") ? (PortableTextNote)
	: (Block); // fallback to `astro-portabletext`
---

<Cmp {...props}>
	<slot />
</Cmp>