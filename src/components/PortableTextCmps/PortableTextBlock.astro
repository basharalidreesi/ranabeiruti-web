---
import PortableTextH2 from "@components/PortableTextCmps/PortableTextH2.astro";
import PortableTextNormal from "@components/PortableTextCmps/PortableTextNormal.astro";
import PortableTextNote from "@components/PortableTextCmps/PortableTextNote.astro";
import { Block } from "astro-portabletext/components";
import type { Props as $, Block as BlockType } from "astro-portabletext/types";

export type Props = $<BlockType>;

const props = Astro.props;
const styleIs = (style: string) => style === props.node.style;

const Cmp =
	styleIs("normal") ? (PortableTextNormal)
	: styleIs("h2") ? (PortableTextH2)
	: styleIs("note") ? (PortableTextNote)
	: (Block); // fallback to `astro-portabletext`
---

<Cmp {...props}>
	<slot />
</Cmp>